"use strict";(self.webpackChunkcassamedicalclinic=self.webpackChunkcassamedicalclinic||[]).push([[197],{7197:(C,d,c)=>{c.r(d),c.d(d,{AddArticleModule:()=>b});var a=c(177),o=c(4341),m=c(6448),u=c(1432),e=c(540),p=c(8956);const h=["editor"];function g(t,F){if(1&t&&(e.j41(0,"div",25),e.nrm(1,"img",26),e.k0s()),2&t){const n=e.XpG(2);e.R7$(1),e.Y8G("src",n.previewUrl,e.B4B)}}function f(t,F){if(1&t&&(e.j41(0,"div",25)(1,"label",14),e.EFF(2,"Selected Image Preview"),e.k0s(),e.DNE(3,g,2,1,"div",19),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngIf",n.previewUrl)}}const A=[{path:"",component:(()=>{class t{constructor(n){this.articleservice=n,this.content="",this.title="",this.selectedFile=null,this.previewUrl=null,this.selectedDate="",this.selectedCategory="",this.filteredArticles=[]}ngOnInit(){this.jodit=u.x.make(this.editorElement.nativeElement,{height:400,toolbarSticky:!0,uploader:{insertImageAsBase64URI:!0},placeholder:"Start typing here..."}),this.jodit.value=this.content,this.jodit.events.on("change",n=>{this.content=n})}onFileSelected(n){this.selectedFile=n.target.files[0]||null,this.previewUrl=this.selectedFile?URL.createObjectURL(this.selectedFile):null}submitArticle(){if(!(this.selectedFile&&this.title&&this.jodit&&this.jodit.value))return void alert("Please fill in all fields, write content, and select an image.");const n=this.jodit.value.split(/\n+/).map(l=>l.trim()).filter(l=>l.length>0),i=new FormData;i.append("title",this.title),i.append("image",this.selectedFile),i.append("description",JSON.stringify(n));const r=(new Date).toISOString().split("T")[0];i.append("date",this.selectedDate||r),this.selectedCategory&&i.append("category",this.selectedCategory),this.articleservice.createArticle(i).subscribe(l=>{console.log("Article uploaded successfully:",l),alert("Article uploaded successfully!");const s={...l,category:this.selectedCategory};this.filteredArticles=[...this.filteredArticles,s],this.resetFormArticle()},l=>{console.error("Upload failed",l),alert("Failed to upload article")})}resetFormArticle(){this.title="",this.selectedFile=null,this.selectedDate="",this.selectedCategory="",this.jodit.value=""}ngOnDestroy(){this.jodit&&this.jodit.destruct()}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(p.q))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-add-article"]],viewQuery:function(i,r){if(1&i&&e.GBs(h,7),2&i){let l;e.mGM(l=e.lsd())&&(r.editorElement=l.first)}},decls:48,vars:4,consts:[[1,"container-fluid","pb-4"],[1,"row"],[1,"col-md-12"],[1,"card","add-article-card"],[1,"card-header"],[1,"p-title-black"],[1,"d-flex","flex-column","text-center","align-items-start"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#",1,"no-text-decoration"],["aria-current","page",1,"breadcrumb-item","active"],[1,"card-body"],[1,"mb-3"],[1,"form-label"],["type","text","name","title","placeholder","Enter article title",1,"form-control",3,"ngModel","ngModelChange"],["type","date","name","date",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","category","placeholder","Enter category",1,"form-control",3,"ngModel","ngModelChange"],["type","file",1,"form-control",3,"change"],["class","mb-3 d-flex flex-column gap-1",4,"ngIf"],[1,"editor-box"],["editor",""],[1,"card-footer"],["type","button",1,"btn","btn-danger","me-2",3,"click"],["type","button",1,"btn","btn-primary","me-2",3,"click"],[1,"mb-3","d-flex","flex-column","gap-1"],[1,"add-article-img",3,"src"]],template:function(i,r){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p",5),e.EFF(6,"Add Articles"),e.k0s(),e.j41(7,"div",6)(8,"nav",7)(9,"ol",8)(10,"li",9)(11,"a",10),e.EFF(12,"Dashboard"),e.k0s()(),e.j41(13,"li",9)(14,"a",10),e.EFF(15,"Articles"),e.k0s()(),e.j41(16,"li",11)(17,"a",10),e.EFF(18,"Add Articles"),e.k0s()()()()()(),e.j41(19,"div",12)(20,"form")(21,"div",13)(22,"label",14),e.EFF(23,"Title"),e.k0s(),e.j41(24,"input",15),e.bIt("ngModelChange",function(s){return r.title=s}),e.k0s()(),e.j41(25,"div",13)(26,"label",14),e.EFF(27,"Date"),e.k0s(),e.j41(28,"input",16),e.bIt("ngModelChange",function(s){return r.selectedDate=s}),e.k0s()(),e.j41(29,"div",13)(30,"label",14),e.EFF(31,"Category"),e.k0s(),e.j41(32,"input",17),e.bIt("ngModelChange",function(s){return r.selectedCategory=s}),e.k0s()(),e.j41(33,"div",13)(34,"label",14),e.EFF(35,"Article Image"),e.k0s(),e.j41(36,"input",18),e.bIt("change",function(s){return r.onFileSelected(s)}),e.k0s()(),e.DNE(37,f,4,1,"div",19),e.j41(38,"div",13)(39,"label",14),e.EFF(40,"Content"),e.k0s(),e.nrm(41,"div",20,21),e.k0s()()(),e.j41(43,"div",22)(44,"button",23),e.bIt("click",function(){return r.resetFormArticle()}),e.EFF(45," Cancel "),e.k0s(),e.j41(46,"button",24),e.bIt("click",function(){return r.submitArticle()}),e.EFF(47," Submit "),e.k0s()()()()()()),2&i&&(e.R7$(24),e.Y8G("ngModel",r.title),e.R7$(4),e.Y8G("ngModel",r.selectedDate),e.R7$(4),e.Y8G("ngModel",r.selectedCategory),e.R7$(5),e.Y8G("ngIf",r.selectedFile))},dependencies:[a.bT,o.qT,o.me,o.BC,o.cb,o.vS,o.cV]})}}return t})()}];let v=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[m.iI.forChild(A),m.iI]})}}return t})(),b=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[a.MD,v,o.YN]})}}return t})()}}]);
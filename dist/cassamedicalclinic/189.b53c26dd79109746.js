"use strict";(self.webpackChunkcassamedicalclinic=self.webpackChunkcassamedicalclinic||[]).push([[189],{6189:(v,g,l)=>{l.r(g),l.d(g,{ArticlesModule:()=>k});var d=l(177),c=l(4341),m=l(6448),t=l(540),h=l(8956);const u=function(r){return["/admin/edit-article",r]};function p(r,o){if(1&r){const e=t.RV6();t.j41(0,"tr")(1,"th"),t.EFF(2),t.k0s(),t.j41(3,"td",24),t.nrm(4,"img",25),t.j41(5,"div",26)(6,"div",27)(7,"div",28)(8,"div",29),t.nrm(9,"img",30),t.k0s()()()()(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.j41(12,"td"),t.EFF(13),t.nI1(14,"date"),t.k0s(),t.j41(15,"td",24)(16,"div",31)(17,"button",32),t.bIt("click",function(){const a=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.deleteArticle(a._id))}),t.nrm(18,"i",33),t.EFF(19," Delete "),t.k0s(),t.j41(20,"a",34),t.nrm(21,"i",35),t.EFF(22," Edit "),t.k0s()()()()}if(2&r){const e=o.$implicit,n=o.index,i=t.XpG();t.R7$(2),t.JRh((i.currentPage-1)*i.pageSize+n+1),t.R7$(2),t.Y8G("src",e.imageUrl||"assets/images/default.jpg",t.B4B),t.BMQ("data-bs-target","#imgModal"+e._id),t.R7$(1),t.Y8G("id","imgModal"+e._id),t.R7$(4),t.Y8G("src",e.imageUrl,t.B4B),t.R7$(2),t.JRh(e.title),t.R7$(2),t.JRh(t.i5U(14,8,e.date,"dd MMM yyyy")),t.R7$(7),t.Y8G("routerLink",t.eq3(11,u,e._id))}}function f(r,o){if(1&r){const e=t.RV6();t.j41(0,"li",21)(1,"a",22),t.bIt("click",function(){const a=t.eBV(e).index,s=t.XpG();return t.Njj(s.changePage(a+1))}),t.EFF(2),t.k0s()()}if(2&r){const e=o.index,n=t.XpG();t.AVh("active",n.currentPage===e+1),t.R7$(2),t.SpI(" ",e+1," ")}}const A=function(){return[]},F=[{path:"",component:(()=>{class r{constructor(e){this.articleService=e,this.articles=[],this.filteredArticles=[],this.currentPage=1,this.totalPages=0,this.pageSize=6,this.searchQuery="",this.filterDate=""}ngOnInit(){this.loadAllArticles()}loadAllArticles(){this.articleService.getEveryArticles().subscribe(e=>{this.articles=e.articles.map(n=>{let i;try{if(i=JSON.parse(n.description),!Array.isArray(i))throw new Error}catch{i=n.description}return{...n,description:i}}),this.filteredArticles=[...this.articles],this.totalPages=Math.ceil(this.filteredArticles.length/this.pageSize)},e=>{console.error("Error loading articles:",e)})}searchArticles(){const e=this.searchQuery.trim().toLowerCase(),n=this.filterDate?new Date(this.filterDate).toDateString():"";this.filteredArticles=this.articles.filter(i=>{const a=!e||i.title?.toLowerCase().includes(e)||i.author?.toLowerCase().includes(e),s=i.date?new Date(i.date).toDateString():"";return a&&(!n||s===n)}),this.currentPage=1,this.totalPages=Math.ceil(this.filteredArticles.length/this.pageSize)}get paginatedArticles(){const e=(this.currentPage-1)*this.pageSize;return this.filteredArticles.slice(e,e+this.pageSize)}changePage(e){e<1||e>this.totalPages||(this.currentPage=e)}deleteArticle(e){confirm("Delete this article?")&&this.articleService.deleteArticle(e).subscribe(()=>{this.loadAllArticles()})}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(h.q))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-articles"]],decls:52,vars:9,consts:[["id","body"],[1,"container-fluid","pb-4"],[1,"row"],[1,"col-md-12"],[1,"p-title-black"],[1,"col-6"],[1,"form-label"],["type","text","placeholder","Search by Articles Name",1,"form-control","admin-search",3,"ngModel","ngModelChange"],["id","startDate","type","date",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","pt-2"],[1,"d-flex","flex-row"],["type","button",1,"btn","btn-primary","d-flex","align-items-center","me-2",3,"click"],[1,"fa-solid","fa-magnifying-glass","me-1"],["routerLink","/admin/add-article",1,"btn","btn-primary","d-flex","align-items-center","me-2"],[1,"fa-solid","fa-plus","me-1"],[1,"admin-table-container","mt-4"],[1,"table","table-bordered","admin-table","article-table"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],[1,"article-pagination"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"text-center"],["alt","article image","data-bs-toggle","modal",1,"detail-table-img",3,"src"],["tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body"],["alt","modal image",1,"img-fluid","modal-img",3,"src"],[1,"d-flex","flex-column","align-items-center","gap-2"],[1,"btn","btn-danger",3,"click"],[1,"fa-regular","fa-trash-can"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa-regular","fa-pen-to-square"]],template:function(n,i){1&n&&(t.j41(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),t.EFF(5,"Articles"),t.k0s()()(),t.j41(6,"div",2)(7,"div",5)(8,"label",6),t.EFF(9,"Search Articles"),t.k0s(),t.j41(10,"input",7),t.bIt("ngModelChange",function(s){return i.searchQuery=s}),t.k0s()(),t.j41(11,"div",5)(12,"label",6),t.EFF(13,"Articles Date"),t.k0s(),t.j41(14,"input",8),t.bIt("ngModelChange",function(s){return i.filterDate=s}),t.k0s()(),t.j41(15,"div",9)(16,"div",10)(17,"button",11),t.bIt("click",function(){return i.searchArticles()}),t.nrm(18,"i",12),t.EFF(19," Search "),t.k0s(),t.j41(20,"a",13),t.nrm(21,"i",14),t.EFF(22," Add "),t.k0s()()()(),t.j41(23,"div",2)(24,"div",3)(25,"div",15)(26,"table",16)(27,"thead")(28,"tr")(29,"th"),t.EFF(30,"#"),t.k0s(),t.j41(31,"th"),t.EFF(32,"Img"),t.k0s(),t.j41(33,"th"),t.EFF(34,"Title"),t.k0s(),t.j41(35,"th"),t.EFF(36,"Date"),t.k0s(),t.j41(37,"th"),t.EFF(38,"Action"),t.k0s()()(),t.j41(39,"tbody"),t.DNE(40,p,23,13,"tr",17),t.k0s()()()(),t.j41(41,"div",3)(42,"div",18)(43,"nav",19)(44,"ul",20)(45,"li",21)(46,"a",22),t.bIt("click",function(){return i.changePage(i.currentPage-1)}),t.EFF(47,"Previous"),t.k0s()(),t.DNE(48,f,3,3,"li",23),t.j41(49,"li",21)(50,"a",22),t.bIt("click",function(){return i.changePage(i.currentPage+1)}),t.EFF(51,"Next"),t.k0s()()()()()()()()()),2&n&&(t.R7$(10),t.Y8G("ngModel",i.searchQuery),t.R7$(4),t.Y8G("ngModel",i.filterDate),t.R7$(26),t.Y8G("ngForOf",i.paginatedArticles),t.R7$(5),t.AVh("disabled",1===i.currentPage),t.R7$(3),t.Y8G("ngForOf",t.lJ4(8,A).constructor(i.totalPages)),t.R7$(1),t.AVh("disabled",i.currentPage===i.totalPages))},dependencies:[d.Sq,m.Wk,c.me,c.BC,c.vS,d.vh]})}}return r})()}];let b=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[m.iI.forChild(F),m.iI]})}}return r})(),k=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[d.MD,b,c.YN]})}}return r})()}}]);